service: pmp
frameworkVersion: ">=1.4.0 <2.0.0"

provider:
  name: aws
  runtime: nodejs4.3
  stage: ${self:custom.stage}
  region: us-east-1
  environment:
    APP_IP: "${self:custom.secrets.APP_ID}"

package:
    include:
      - ./src/node_modules
    exclude:
      - .serverless/**
      - secrets.yml
    deDevDependencies: false

functions:
  skill:
    handler: src/handler.handler
    description: PMP function
    events:
      - alexaSkill

custom:
  stage: ${opt:stage, self:provider.stage}
  secrets: ${env:APP_ID, file(secrets.yml):${self:custom.stage.APP_ID}
